@model WaterCool.Models.InfoViewModel
@if(@Model.photoAddress == null)
{
    <img id = "bh" src="http://fakeimg.pl/180x180/">
}
@if(@Model.photoAddress != null)
{
    <img id = "bh" src="@Model.photoAddress" width = 180 height = 180>
}

<form  method="post" style="width:30%; height:100%;padding-bottom:30px;" enctype="multipart/form-data">
    <div style="width:180px;">
        <input id = "upl" class="form-control"  type="file" name="pic" accept="image/*"/>
    </div>
    
    <div>
        @ViewBag.error
    </div>
    <input type="hidden" asp-for="uid" >
    <label asp-for="username"></label> @Model.username<br>
    sex<br>
    @Html.RadioButtonFor(model => model.sex, "男") 男
    @Html.RadioButtonFor(model => model.sex, "女") 女<br>
    city<br>
    <input asp-for="city" class="form-control">
    birthday<br>
    <input asp-for="birthday" id = "birth" class="form-control" data-provide="datepicker" data-date-format="yyyy/mm/dd">
    job<br>
    <input asp-for="job" class="form-control">
    introduce<br>
    <textarea asp-for="introduce" class="form-control" style="resize:none;"></textarea><br>
    <div >@ViewData["errMsg"]</div>
    <button type="submit" class="btn btn-default">送出</button>
    <div style="height:40px;"></div>

</form>

<script>
    $(function (){
 

 
    function preview(input) {
 
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            
            reader.onload = function (e) {
                $('#bh').attr('src', e.target.result).attr('width', 180).attr('height', 180);
            }
 
            reader.readAsDataURL(input.files[0]);
        }
    }
 
    $("body").on("change", "#upl", function (){
        preview(this);
    })
    
})
</script>
